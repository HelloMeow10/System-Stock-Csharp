@page "/compras/proveedores"
@using AgileStockPro.App.Components.Suppliers
@using AgileStockPro.App.Models
@using AgileStockPro.App.Services
@using Microsoft.FluentUI.AspNetCore.Components
@using Icons = Microsoft.FluentUI.AspNetCore.Components.Icons
@inject ISupplierService SupplierService

<PageTitle>Proveedores</PageTitle>

<div class="page-container">
    <div class="page-header">
        <div class="title-section">
            <h2>Proveedores</h2>
            <p>Gestión de proveedores y condiciones comerciales</p>
        </div>
        <FluentButton Appearance="Appearance.Accent">
            <FluentIcon Value="@(new Icons.Regular.Size20.Add())" Slot="start" />
            Nuevo Proveedor
        </FluentButton>
    </div>

    <div class="filters-container">
        <FluentTextField Placeholder="Buscar por nombre o CUIT..." class="search-field">
            <FluentIcon Value="@(new Icons.Regular.Size16.Search())" Slot="start" />
        </FluentTextField>

        <FluentSelect class="filter-select" TOption="string">
            <FluentOption Value="all">Todas las categorías</FluentOption>
            <FluentOption Value="ferreteria">Ferretería</FluentOption>
            <FluentOption Value="electricidad">Electricidad</FluentOption>
            <FluentOption Value="pintureria">Pinturería</FluentOption>
        </FluentSelect>

        <FluentButton Appearance="Appearance.Outline">
            <FluentIcon Value="@(new Icons.Regular.Size16.ArrowDownload())" Slot="start" />
            Exportar
        </FluentButton>
    </div>

    <div class="grid-container">
        <SuppliersTable Suppliers="suppliers" />
    </div>
</div>

@code {
    private IEnumerable<Supplier>? suppliers;

    protected override async Task OnInitializedAsync()
    {
        suppliers = await SupplierService.GetSuppliersAsync();
    }
}